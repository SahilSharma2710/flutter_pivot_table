<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>PivotTable.js</title>

    <!-- local CSS files -->
    <link rel="stylesheet" type="text/css" href="css/c3.min.css">
    <link rel="stylesheet" type="text/css" href="css/pivot.min.css">

    <!-- local JavaScript files -->
    <script type="text/javascript" src="js/d3.min.js"></script>
    <script type="text/javascript" src="js/c3.min.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/pivot.min.js"></script>
    <script type="text/javascript" src="js/d3_renderers.min.js"></script>
    <script type="text/javascript" src="js/c3_renderers.min.js"></script>
    <script type="text/javascript" src="js/export_renderers.min.js"></script>
    <script type="text/javascript" src="js/jquery.ui.touch-punch.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Khmer:wght@100..900&family=Noto+Serif+Khmer:wght@100..900&display=swap');
    </style>
    <style>
        body {font-family: "Noto Sans Khmer", sans-serif;}
        .node {
            border: solid 1px white;
            font: 10px sans-serif;
            line-height: 12px;
            overflow: hidden;
            position: absolute;
            text-indent: 2px;
        }
        .c3-line, .c3-focused {stroke-width: 3px !important;}
        .c3-bar {stroke: white !important; stroke-width: 1;}
        .c3 text { font-size: 18px; color: grey;}
        .tick line {stroke: white;}
        .c3-axis path {stroke: grey;}
        .c3-circle { opacity: 1 !important; }
        .c3-xgrid-focus {visibility: hidden !important;}
    </style>
</head>
<body>
    <script type="text/javascript">

function loadPivotTable(data,hiddenAttributes,aggregatorName,vals,rows,cols,marginLabel,rendererName) {
    // console.log(data);
    // console.log(hiddenAttributes);
    // console.log(aggregatorName);
    // console.log(vals);
    // console.log(rows);
    // console.log(cols);
    // console.log(marginLabel);
        $(function() {
            $("#output").pivotUI(
                data,
                {
                    renderers: $.extend(
                        $.pivotUtilities.renderers,
                        $.pivotUtilities.c3_renderers,
                        $.pivotUtilities.d3_renderers,
                        $.pivotUtilities.export_renderers
                    ),
                    hiddenAttributes: hiddenAttributes, // Placeholder for hidden attributes
                    
                    aggregatorName: aggregatorName, // Placeholder for aggregator name
                    vals: vals, // Placeholder for values
                    rows: rows, // Placeholder for rows
                    cols: cols, // Placeholder for columns    
                    rendererName: rendererName,

                    onRefresh: function(config) {
                        $("th.pvtTotalLabel").each(function() {
                            $(this).text(marginLabel);
                        });
                    }
                }
            ).show();
        });

    }
    </script>

    <div id="output" style="display: none;"></div>
</body>
</html>
